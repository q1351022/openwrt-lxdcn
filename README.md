# OpenWrt LXD 自动部署脚本（简体中文版）

本项目旨在简化 OpenWrt 在 LXD 容器中的部署与管理，适合日常便携路由器、Wi-Fi 热点、旁路由等场景使用。该脚本具备自动检测架构、智能分配子网、Wi-Fi 热点自动开启、主/旁路由切换、USB/无线网卡支持等功能。

> **适用平台**：Ubuntu 20.04+ / Debian 11+（需支持 systemd 与 LXD）

---

## 一键使用

```bash
bash <(wget -qO- https://raw.githubusercontent.com/q1351022/openwrt-lxdcn/main/openwrt-lxd.sh)
```

首次运行后会出现菜单：

- `1` 一键部署（首次使用）
- `2` 切换主路由模式
- `3` 切换旁路由模式
- `4` 进入容器控制台
- `5` 清理环境
- `0` 退出

---

## 默认镜像版本与更新策略

部署过程中将提供版本选择：

- `默认使用`：OpenWrt `23.05.3`
- `可选升级`：从官网下载 **最新稳定版本**

---

## 默认 Wi-Fi 热点信息（主路由模式）

部署完成后，将自动启动一个 Wi-Fi 热点供设备连接：

- **SSID**：`OpenWrt-LXD`
- **密码**：`12345678`
- **登录地址**：`http://192.168.X.1`（自动推测子网，一般为 `192.168.2.1`）
- **默认账户**：`root`
- **默认密码**：空（首次登录请设置）

---

## 快捷命令：`op`

脚本自动创建了 `op` 快捷指令，可直接执行容器内命令：

```bash
op ping baidu.com
op uci show network
op reboot
```

---

## 高级功能说明（可选开启）

在菜单中提供可选开关：

- **IPv6 支持**：默认关闭，可启用 RA + SLAAC
- **Wi-Fi 热点自动切换**：支持 USB 网卡/Wi-Fi 网卡动态接入
- **USB 网络支持**：自动识别新接口并桥接至主容器
- **主路由 / 旁路由切换**：一键设置 IP、网关、DNS、DHCP、防火墙等参数

---

## 清理环境

如需删除容器与配置：

- 选择菜单 `5` 执行清理
- 可选是否保留 `op` 快捷方式

---

## 反馈与支持

如遇问题欢迎提 [Issue](https://github.com/q1351022/openwrt-lxdcn/issues) 或提交 PR。
